<template>
  <div v-for="path in props.dataset.getLinkedData" :key="path">
    <a
      :href="PIVEAU_HUB_REPO_URL + 'datasets' + path"
      target="_blank"
      :title="t(`message.dataset_detail.metadata_download`)"
      :aria-label="t(`message.dataset_detail.metadata_download`)"
      class="download-item"
    >
      <SvgIcon icon="Download" size="xl" class="download-item__icon" />
      <div>
       <h2 class="download-item__title">{{(t(`message.dataset_detail.metadata`)).toLowerCase() + '.' + path.split('.').pop() }}</h2>
       <p class="meta-info download-item__meta-info">
          <span class="meta-info__item">{{ path.split('.').pop() }}</span>
        </p>
      </div>
    </a>
  </div>
</template>

<script setup lang="ts">
import { useI18n } from 'vue-i18n';
import SvgIcon from '../SvgIcon.vue';
import type { DcatApChV2DatasetAdapter } from './model/dcat-ap-ch-v2-dataset-adapter';
import { PIVEAU_HUB_REPO_URL } from '~/constants/piveau-endpoints';

const { t } = useI18n();

const props = defineProps({
  dataset: {
    type: Object as PropType<DcatApChV2DatasetAdapter>,
    required: true
  }
});

</script>

<style scoped lang="scss">
  a {
    overflow-x: hidden;
    word-break: break-all;
  }

  .download-item__title {
    text-overflow: hidden;
    overflow-x: hidden;
    word-break: break-all;
  }
</style>
